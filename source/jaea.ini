[files]
dat_file = ../data/JAEA/JAEA_ADS_026.dat

[plots.essential]
energy = True
phase = True
cav = False
emittance = True
twiss = False
envelopes = False
transfer matrices = False


[beam_calculator.lightwin.envelope_longitudinal]
tool = Envelope1D
flag_phi_abs = True
flag_cython = True
n_steps_per_cell = 20
method = RK

[beam]
linac = JAEA
e_rest_mev = 938.27203
q_adim = 1.
e_mev = 939.45813
f_bunch_mhz = 162.
i_milli_a = 19.955719
sigma_zdelta =
   1.6062233e-06, -2.7681629e-08,
   -2.7681629e-08, 3.8462344e-08

[wtf.quick_debug]
optimisation_algorithm = least_squares
strategy = k out of n
idx = cavity
failed =
   13
k = 5
objective_preset = simple_ADS
design_space_preset = sync_phase_as_variable
position = end of last altered lattice
phi_s fit = True

[wtf.bruce]
optimisation_algorithm = least_squares
strategy = manual
idx = element
failed =
   12,
   14,
   125,
   127,
   129,
   131,
   133,
   125, 127, 129, 131, 133
manual list =
   6, 8, 10, 14, 23,
   8, 10, 12, 23, 25,
   114, 116, 127, 129, 131,
   114, 116, 125, 129, 131,
   116, 125, 127, 131, 133,
   116, 125, 127, 129, 133,
   116, 125, 127, 129, 131,
   40, 42, 44, 46, 48, 57, 59, 61, 63, 65, 74, 76, 78, 80, 82, 91, 93, 95, 97, 99, 108, 110, 112, 114, 116
objective_preset = simple_ADS
design_space_preset = sync_phase_as_variable
position = end of last altered lattice
phi_s fit = True


[wtf.systematic]
optimisation_algorithm = least_squares
strategy = k out of n
idx = cavity
failed =
   0,
   1,
   2,
   3,
   4,
   5,
   6,
   7,
   8,
   9,
   10,
   11,
   12,
   13,
   14,
   15,
   16,
   17,
   18,
   19,
   20,
   21,
   22,
   23,
   24,
   25,
   26,
   27,
   28,
   29,
   30,
   31,
   32,
   33,
   34,
   35,
   36,
   37,
   38,
   39
k = 5
objective = w_kin, phi_abs, mismatch_factor_zdelta
scale objective = 1., 1., 1.
position = end of last altered lattice
phi_s fit = True

[beam_calculator_post.tracewin.quick_debug]
tool = TraceWin
simulation type = X11 full
hide
partran = 1
nbr_part1 = 10
current1 = 0.

[beam_calculator_post.tracewin.precise]
tool = TraceWin
simulation type = X11 full
hide
partran = 1
nbr_part1 = 1000000
dst_file1 = /home/placais/LightWin/data/JAEA_resend/EllipR2_2_A.dst

[evaluators.classic]
beam_calc_post =
   no power loss,
   longitudinal eps at end,
   mismatch factor at end
